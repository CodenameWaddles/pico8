pico-8 cartridge // http://www.pico-8.com
version 36
__lua__
--raycasting test
--codenamewaddles

poke(0X5F5C, 255) --no repeat press when buttons are held (btnp(n))

function _init()
	title_init()
end

--constants
cs={13,4,12}
fac=1
_pal={
0,129,1,3,
134,5,6,7,
8,9,10,11,
12,140,14,15}



function level_init()
	px=4.5
	py=10.5
	pa=0
	pw=0.3
	equip=1
	weapon_total=2
	health=50
	maxhealth=health
	mana=50
	maxmana=mana

	actor_sort_buffer_init = 30
	actor_sort_buffer = actor_sort_buffer_init --avoid sorting the actors by distance every frame

	animation_counter_total = 15
	animation_counter = animation_counter_total --to animate sprites

	x=0
	y=0
	vx=0
	vy=0
	ox=0
	oy=0
	dx=0
	dy=0
	ix=0
	iy=0
	h=40

	room_with_walls=true

	bat = make_actor(10,7)
	make_bat(bat)
	bat2 = make_actor(3,7)
	make_bat(bat2)
	superbat = make_actor(3,9)
	make_superbat(superbat)
	goblin = make_actor(5,5)
	make_goblin(goblin)

	actors = {}

	--for i=1,6 do
	--	for j=4,8 do
	--		tree = make_actor(i,j)
	--		make_tree(tree)
	--		add(actors, tree)
	--	end
	--end

	add(actors, bat)
	add(actors, bat2)
	add(actors, superbat)
	add(actors, goblin)

	movable_actors = {}

	add(movable_actors, bat)
	add(movable_actors, bat2)
	add(movable_actors, superbat)
	add(movable_actors, goblin)

	_update = level_update
	_draw = level_draw
end

function level_update()
	if(animation_counter == 0) then
		for a in all(movable_actors) do
			a.second_frame = not(a.second_frame)
		end
		animation_counter = animation_counter_total
	else
		animation_counter-=1
	end
    update_player()
	foreach(movable_actors,move_actor)
	if(actor_sort_buffer >0) actor_sort_buffer-=1
	if(actor_sort_buffer == 0)	sort_actors_dist(actors) actor_sort_buffer = actor_sort_buffer_init
end

function level_draw()
    -- background
	cls(1)
	rectfill(0,64,128,128,3)

	--walls
	raycast_walls()

	--draw_sprite(0,64,50/dist_player(bat),64,64)
	foreach(actors,display_actor)
	draw_hud()
	--print(stat(7))
	--print(#actors, 64,64)
end

function raycast_walls()
	for i=0,127 do
		x=px
		y=py
		
		vx=cos(pa+atan2(1,(i-64)/64))
		vy=sin(pa+atan2(1,(i-64)/64))
		fac=cos(atan2(1,(i-64)/64))

		dx=abs(1/vx)
		dy=abs(1/vy)
		ix=vx>0 and 1 or -1
		iy=vy>0 and 1 or -1
		if vx>0 then
			ox=(flr(x)-x+1)/vx
		else
			ox=abs((x-flr(x))/vx)
		end
		if vy>0 then
			oy=(flr(y)-y+1)/vy
		else
			oy=abs((y-flr(y))/vy)
		end
		
		while true do
			-- horizontal intersection
			if ox<oy then
				-- iterate raycast
				x+=ix
				d=ox
				ox+=dx
				-- check for collsion
				if mget(x,y)>0 or x<0 or x>31 or y<0 or y>31 then
					-- line endpoints (rounded)
					tw=flr(64-h/d/fac)
					bw=flr(64+h/d/fac)
					tline(i,tw,i,bw,(py+vy*d)%1*2+(mget(x,y)-1)*2,0,0,2/(bw-tw))
					break
				end
			else -- vertical intersection
				y+=iy
				d=oy
				oy+=dy
				if mget(x,y)>0 or x<0 or x>31 or y<0 or y>31 then
					tw=flr(64-h/d/fac)
					bw=flr(64+h/d/fac)
					tline(i,tw,i,bw,(px+vx*d)%1*2+(mget(x,y)-1)*2,0,0,2/(bw-tw))
					break
				end
			end
		end
	end
end

function update_player()
    if(btn(0)) then
        pa+=0.01
        if pa>1 then
            pa-=1
        end
    end

    if(btn(1)) then
        pa-=0.01
        if pa<0 then
            pa+=1
        end
    end

    if(btn(2)) then
		if(not(solid(px+(pw*sgn(cos(pa))), py)) and not(on_actor(px+(pw*sgn(cos(pa))), py, actors))) px+=cos(pa)*0.1
        if(not(solid(px, py+(pw*sgn(sin(pa))))) and not(on_actor(px, py+(pw*sgn(sin(pa))), actors))) py+=sin(pa)*0.1
    end
    if(btn(3)) then
		if(not(solid(px-(pw*sgn(cos(pa))), py)) and not(on_actor(px-(pw*sgn(cos(pa))), py, actors))) px-=cos(pa)*0.1
        if(not(solid(px, py-(pw*sgn(sin(pa))))) and not(on_actor(px, py-(pw*sgn(sin(pa))), actors))) py-=sin(pa)*0.1
    end

	if(btnp(4)) then
		equip+=1
		if(equip>weapon_total) then
			equip=1
		end
	end
	if(btnp(5)) then
		health-=3
		mana-=3
	end
end

function draw_weapon(spritex, spritey)
	sspr(spritex, spritey, 8, 16, 86, 64, 32, 64)
end

function draw_hud()
	--weapon
	if(equip==1) then
		draw_weapon(0, 80)
	elseif(equip==2) then
		draw_weapon(8, 80)
	end

	rectfill(0,0,61,14,6)
	--health
	spr(144,1,0)
	for i=0,health do
		line(i+9,2,i+9,5,8)
	end
	for i=health+1,maxhealth do
		line(i+9,2,i+9,5,5)
	end
	--mana
	spr(145,1, 7)
	for i=0,mana do
		line(i+9,9,i+9,12,12)
	end
	for i=mana+1,maxmana do
		line(i+9,9,i+9,12,5)
	end
end

function display_actor(a)
	local angle_diff = angle_difference(a)
	local dist = dist_player(a)
	if(angle_diff < 0.25) then
		if(not(room_with_walls) or not(ray_actor_player(a))) then
			local ax = (angle_diff*128)/0.25
		--if(angle_diff < 0.125 or angle_diff > 0.875) then
			--local ax = 64-(128*sin(angle_diff))
			local sx = a.sx
			if(a.second_frame) sx+=8
			--local h = min(60/dist, 140) --change if need be
			local h = 60/dist
			local w = h*a.fac
			draw_sprite(sx,a.sy,a.sw,a.sh,h,w,ax,a.h)
		end
	end
end

function angle_difference(a)
	local angle = atan2(a.x - px, a.y - py)
	local angle_diff = pa - angle
	if(angle_diff<0) angle_diff+=1
	angle_diff+=0.125
	if(angle_diff>1) angle_diff-=1
	return angle_diff
end

function draw_sprite(sx,sy,sw,sh,h,w,x,y)
	sspr(sx,sy,sw,sh,x-(h/2),y-(h/2),h,w)
end

function dist_player(a)
	return dist(px,py,a.x,a.y)
end

function dist(x1,y1,x2,y2)
	return sqrt((x1-x2)^2 + (y1-y2)^2)
end

--checks if there is a wall between actor and player
function ray_actor_player(a)
	local dist = dist_player(a)
	local cos = 0.002*(px-a.x)/dist
	local sin = 0.002*(py-a.y)/dist
	local x = a.x
	local y = a.y
	for i=0,flr(dist) do
		x += cos y += sin
		if(solid(flr(x),flr(y))) return true
	end
	return false
end

function sort_actors_dist(actors)
	qsort(actors,dist_comparator)
end

--custom comparator function for qsort
function dist_comparator(a,b)
	return dist_player(a) > dist_player(b)
end

--check if map tile is solid
function solid(x,y)
	return fget(mget(x,y), 0)
end

function title_init()
	--title screen variables
	title_scroll = true
	mx = 0
	my = 18
	height = 16
	width = 16
	scroll_speed = 2
	x0 = 64 - (width/2)
	y00 = 0 - height
	y10 = 0
	y01 = 128
	y11 = 128 + height
	_draw = title_draw
	_update = title_update
end

function title_update()
	if(not(title_scroll) and btn(5)) level_init()
end

function title_draw()
	cls()
	if(y00 == y01) title_scroll = false
	for i=0,width do
		tline(x0+(2*i), y00, x0+(2*i), y10, mx+((2*i)/8), my, 0, 1/8)
		tline(x0+(2*i+1), y01, x0+(2*i+1), y11, mx+((2*i+1)/8), my, 0, 1/8)
	end
	if(title_scroll) y00+=scroll_speed y10+=scroll_speed y01-=scroll_speed y11-=scroll_speed
end

--sorting algorithm
function qsort(a,c,l,r)
	c,l,r=c or function(a,b) return a<b end,l or 1,r or #a
	if l<r then
		if c(a[r],a[l]) then
			a[l],a[r]=a[r],a[l]
		end
		local lp,k,rp,p,q=l+1,l+1,r-1,a[l],a[r]
		while k<=rp do
			local swaplp=c(a[k],p)
			-- "if a or b then else"
			-- saves a token versus
			-- "if not (a or b) then"
			if swaplp or c(a[k],q) then
			else
				while c(q,a[rp]) and k<rp do
					rp-=1
				end
				a[k],a[rp],swaplp=a[rp],a[k],c(a[rp],p)
				rp-=1
			end
			if swaplp then
				a[k],a[lp]=a[lp],a[k]
				lp+=1
			end
			k+=1
		end
		lp-=1
		rp+=1
		-- sometimes lp==rp, so 
		-- these two lines *must*
		-- occur in sequence;
		-- don't combine them to
		-- save a token!
		a[l],a[lp]=a[lp],a[l]
		a[r],a[rp]=a[rp],a[r]
		qsort(a,c,l,lp-1       )
		qsort(a,c,  lp+1,rp-1  )
		qsort(a,c,       rp+1,r)
	end
end

--actors
function make_actor(ax,ay)
	actor = {
		x=ax,
		y=ay,
		w=0.5
	}
	return actor
end

function on_actor(x,y,actors)
	for a in all(actors) do
		if(x<=a.x+a.w and x>=a.x-a.w and y<=a.y+a.w and y>=a.y-a.w) return true
	end
end

function move_actor(a)
	local dist = dist_player(a)
	if(not(ray_actor_player(a)) and dist<=a.view_distance and dist>pw+a.w) then
		local dx = a.x - px
		local dy = a.y - py
		--if(not(solid(a.x-dx)))
		a.x-=dx*a.speed
		--if(not(solid(a.y-dy)))
		a.y-=dy*a.speed
	end
end

--enemies
function make_bat(actor)
	actor.sx=0 actor.sy=64
	actor.h=64 actor.sw=8
	actor.sh=8 actor.fac=1
	actor.speed=0.025
	actor.view_distance=7
	actor.second_frame = false
end

function make_superbat(actor)
	actor.sx=16 actor.sy=64
	actor.h=64 actor.sw=8
	actor.sh=8 actor.fac=1
	actor.speed=0.025
	actor.view_distance=7
	actor.second_frame = false
end

function make_goblin(actor)
	actor.sx=32 actor.sy=64
	actor.h=64 actor.sw=8
	actor.sh=16 actor.fac=2
	actor.speed=0.02
	actor.view_distance=5
	actor.second_frame = false
end

--decor
function make_tree(actor)
	actor.sx=48 actor.sy=64
	actor.h=64 actor.sw=8
	actor.sh=16 actor.fac=2
end

__gfx__
00000000666656664444444444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000666656664444444494949494505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700555555554444444494949494555555550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000566666564444499494949494505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000566666564444499494949494505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700555555554444444494949494505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000666656664444444494949494505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000666656664444444444444444505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55555555555555550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55555555555555550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
56665655655656650000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55655556665656650000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55655655655656550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55655655655656650000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55555555555555550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55555555555555550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55555555555555550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55555555555555550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
56665665656556550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55655665565566650000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55655655656556550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55655665656556550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55555555555555550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55555555555555550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66655666666666664444444444444444999999999999999905050505000000000000000000000000000000000000000000000000000000000000000000000000
66655666666666665555555555555555999999999999999950005000000000000000000000000000000000000000000000000000000000000000000000000000
66655666666666665555555555555555449944499444994450005000000000000000000000000000000000000000000000000000000000000000000000000000
55555555555555554444444444444444449944499444994455555555000000000000000000000000000000000000000000000000000000000000000000000000
55555555555555554444444444444444449944499444994456005600000000000000000000000000000000000000000000000000000000000000000000000000
66666666665566664444444444444444449944499444994456005600000000000000000000000000000000000000000000000000000000000000000000000000
6666666666556666444444444444aa44449944499444994456005600000000000000000000000000000000000000000000000000000000000000000000000000
666666666655666644444444444999a4449944499444994456005600000000000000000000000000000000000000000000000000000000000000000000000000
666666666655666644444444444999a4449944499444994456005600000000000000000000000000000000000000000000000000000000000000000000000000
66666666665566664444444444449944449944499444994456005600000000000000000000000000000000000000000000000000000000000000000000000000
55555555555555554444444444444444449944499444994456005600000000000000000000000000000000000000000000000000000000000000000000000000
55555555555555554444444444444444449944499444994456005600000000000000000000000000000000000000000000000000000000000000000000000000
66666556666666664444444444444444449944499444994456005600000000000000000000000000000000000000000000000000000000000000000000000000
66666556666666665555555555555555449944499444994456005600000000000000000000000000000000000000000000000000000000000000000000000000
66666556666666665555555555555555999999999999999956005600000000000000000000000000000000000000000000000000000000000000000000000000
66666556666666664444444444444444999999999999999956005600000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5000000500000000500000050000000000bbbb0000bbbb0000333b00000000000000000000000000000000000000000000000000000000000000000000000000
1000000100111100200000020022220000bbbb0000bbbb00033333b0000000000000000000000000000000000000000000000000000000000000000000000000
10000001008181002000000200828200000bb000000bb0000333333b000000000000000000000000000000000000000000000000000000000000000000000000
1100001101111110220000220222222000bbbb0000bbbb0003333333000000000000000000000000000000000000000000000000000000000000000000000000
01111110110000110222222022000022bbbbbbbbbbbbbbbb03333333000000000000000000000000000000000000000000000000000000000000000000000000
0081810010000001008282002000000200bbbb0000bbbb0000333900000000000000000000000000000000000000000000000000000000000000000000000000
001111005000000500222200500000050bbbbbb00bbbbbb000044900000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000bbbbbb00bbbbbb000044900000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000bbbbbb00bbbbbb000044900000000000000000000000000000000000000000000000000000000000000000000000000
0880ee000001c00000000000000000000bbbbbb00bbbbbb000044900000000000000000000000000000000000000000000000000000000000000000000000000
288888e0001c0000000000000000000000bbbb0000bbbb0000544900000000000000000000000000000000000000000000000000000000000000000000000000
288888e0011111c0000000000000000000b00b0000b00b0000544490000000000000000000000000000000000000000000000000000000000000000000000000
0288880011111c00000000000000000000b00b000b0000b000544490000000000000000000000000000000000000000000000000000000000000000000000000
002880000001c000000000000000000000b00b000b0000b000544444000000000000000000000000000000000000000000000000000000000000000000000000
00020000001c0000000000000000000000b00b0000b00b0005444444000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000b00b0000b00b0054444444000000000000000000000000000000000000000000000000000000000000000000000000
00000000007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0c700000006700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11c70000006700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
111c0000006670000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
011a0000000670000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0aa90000000660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
04449000000066000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00449000000066000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00449000000066050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00044900000065500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00044900000554900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00004400000004900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00004400000004490000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00004440000000440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000440000000440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0001010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
4041424344454646000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5051525354555656000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0100000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0100000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0100000000000000010000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0100000000000000010000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0100000000000000010000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0100000000000000010000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0100000001010101010100000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0100000000000001000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0100000000000001000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0100000000000001000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0100000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0100000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0100000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0100000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2021000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
